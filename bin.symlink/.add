#!/usr/bin/env sh

if [ $# -eq 0 ]; then
  echo "Must specify the name of a dotfile to add"
  exit 1
fi

dotfiles_dir="$(grealpath "$(dirname "$(greadlink -f "$0")")/..")"
dotfile_base="$(echo $1 | gsed -nr 's/^[\.+]?(.*?)$/\1/p' | gsed 's/\.symlink$//')"
dotfile="$dotfiles_dir/$dotfile_base.symlink"

touch $dotfile
ln -s $dotfile "$HOME/.$dotfile_base"
$EDITOR $dotfile

echo "Created $dotfile."
exit 0
